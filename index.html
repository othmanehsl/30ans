<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>30 ans – Animation</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100vw;height:100vh;overflow:hidden;display:flex;align-items:center;justify-content:center;background:#fff}
#stage{display:flex;align-items:center;justify-content:center;width:100%;height:100%}

.svg-wrapper{flex:0 0 auto;transform-origin:50% 50%}
#wrapper30,#wrapperAnniv{width:80vmin}

#wrapperAnniv { margin-left:-27vmin; }

svg{width:100%;height:auto;vector-effect:non-scaling-stroke}

/* “30” */
#number30{transform-origin:50% 50%}
#number30 path{fill:#0C306F;fill-opacity:0;stroke:#0C306F;stroke-width:70;stroke-linecap:round;stroke-linejoin:round}

/* “Anniversaire” */
#annivSVG path{fill:#0C306F;fill-opacity:0;stroke:#0C306F;stroke-width:50}

#stage{position:relative;}          /* pour positionner l’image en absolu */

#celebrationImg{
  position:absolute;
  width:26vmin;               /* ajustez la taille si besoin */
  top:0;                      /* on pilotera X en JS */
  transform:translate(-50%,-110%); /* centré sur X, placé 10 % plus haut */
  opacity:0;
  will-change:transform,opacity;
  pointer-events:none;
}


</style>
</head>
<body>
<div id="stage">
  <!-- ===== “30” ===== -->
  <div class="svg-wrapper" id="wrapper30">
    <svg id="number30" viewBox="0 0 2154 1361" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
      <g transform="translate(0,1361) scale(0.1,-0.1)">
        <path d="M541 13498 c-41 -202 -46 -250 -46 -498 0 -262 6 -314 55 -505 151
      -585 609 -967 1314 -1095 291 -54 280 -53 1784 -59 l1402 -6 -1469 -1495
      c-807 -822 -1467 -1496 -1466 -1498 1 -1 40 16 86 37 482 226 1383 368 2102
      331 653 -33 1176 -172 1741 -463 645 -332 1258 -847 1877 -1577 348 -410 540
      -683 682 -966 89 -177 141 -313 242 -634 113 -357 174 -528 302 -845 221 -547
      369 -837 628 -1230 595 -904 1398 -1617 2365 -2101 729 -365 1490 -569 2330
      -625 197 -13 750 -7 920 11 417 42 756 105 1110 205 830 235 1582 634 2260
      1198 175 146 567 535 711 707 517 614 889 1271 1134 2005 152 452 241 873 292
      1375 25 248 25 872 0 1120 -63 612 -184 1116 -404 1675 -86 220 -275 608 -393
      810 -728 1241 -1844 2176 -3185 2667 -1667 611 -3580 442 -5110 -453 -1018
      -595 -1809 -1427 -2357 -2476 l-79 -152 43 -38 c187 -167 261 -236 389 -364
      316 -317 602 -674 817 -1019 l66 -107 46 151 c205 668 548 1247 1035 1745 88
      90 210 206 270 259 675 583 1479 929 2385 1028 212 24 648 24 857 1 856 -95
      1597 -401 2265 -936 155 -124 431 -390 564 -544 589 -684 945 -1518 1029
      -2411 30 -319 16 -760 -35 -1074 -172 -1062 -726 -2012 -1565 -2683 -622 -497
      -1334 -799 -2145 -910 -222 -30 -697 -38 -936 -15 -747 71 -1471 335 -1986
      723 -643 485 -1089 1171 -1434 2208 -74 225 -163 518 -254 845 -41 146 -122
      377 -192 550 -236 575 -549 1101 -938 1570 -120 146 -476 505 -635 641 -614
      525 -1245 888 -1930 1109 -337 109 -764 190 -998 190 l-79 0 229 238 c527 545
      1168 1251 1309 1442 80 107 148 242 174 344 24 97 27 246 5 331 -70 271 -328
      533 -641 651 -92 34 -208 62 -309 72 -59 7 -986 5 -2660 -3 -1703 -9 -2600
      -10 -2659 -3 -260 28 -460 118 -633 282 -98 93 -184 210 -228 309 -13 32 -26
      57 -29 57 -2 0 -13 -46 -25 -102z"/>
      <path d="M12800 7220 c-165 -21 -322 -94 -422 -197 l-38 -39 140 -139 139
      -139 46 43 c26 24 72 55 103 69 49 23 73 27 173 30 185 6 271 -28 322 -127 23
      -47 27 -66 27 -143 l0 -88 -217 0 c-247 0 -366 -12 -465 -45 -256 -86 -383
      -326 -323 -610 60 -285 275 -427 625 -412 168 7 255 38 353 125 l37 34 0 -71
      0 -71 220 0 220 0 0 598 c0 328 -5 631 -10 672 -36 277 -208 444 -515 500 -83
      15 -325 21 -415 10z m490 -1131 c0 -159 -32 -224 -136 -275 -45 -22 -73 -28
      -153 -32 -203 -10 -301 56 -301 203 0 62 14 97 57 137 52 50 89 57 321 57
      l212 1 0 -91z"/>
      <path d="M15144 7216 c-92 -18 -184 -59 -261 -119 l-63 -48 0 81 0 80 -212 -2
      -213 -3 -3 -882 -2 -883 219 0 220 0 3 573 c3 528 5 576 22 624 85 239 434
      259 537 31 l24 -53 3 -587 3 -588 225 0 226 0 -4 638 c-4 614 -5 640 -26 715
      -40 146 -130 275 -242 347 -112 72 -307 104 -456 76z"/>
      <path d="M16995 7219 c-268 -38 -460 -178 -531 -389 -25 -75 -26 -261 -2 -341
      27 -86 89 -171 159 -218 107 -72 178 -87 586 -130 150 -16 213 -64 213 -162 0
      -123 -151 -199 -366 -185 -152 10 -270 50 -370 126 l-51 38 -143 -143 c-163
      -163 -158 -145 -56 -221 169 -128 342 -175 641 -176 253 -1 419 41 561 141
      104 73 168 163 199 281 20 73 19 240 -1 315 -40 157 -166 276 -344 329 -30 9
      -157 28 -282 41 -251 27 -294 40 -324 97 -11 22 -15 48 -12 85 5 61 28 92 93
      126 54 29 228 35 334 13 68 -14 170 -56 214 -88 15 -11 33 3 154 124 l138 138
      -35 30 c-52 45 -204 118 -294 140 -139 35 -348 48 -481 29z"/>
      <path d="M8376 4567 c-317 -714 -788 -1390 -1280 -1839 -460 -420 -935 -704
      -1498 -896 -733 -251 -1552 -302 -2408 -151 -479 85 -987 251 -1360 445 -421
      219 -816 575 -1153 1037 -245 335 -472 771 -623 1192 l-43 120 0 -122 c-2
      -410 179 -1026 456 -1553 301 -573 656 -1054 1016 -1379 863 -779 1978 -1254
      3247 -1385 497 -52 1021 -45 1465 20 834 120 1655 466 2360 994 388 291 768
      662 1051 1027 46 59 84 112 84 116 0 5 -55 82 -121 170 -143 191 -314 446
      -429 642 -114 195 -334 645 -420 860 -82 203 -204 566 -245 728 -16 59 -31
      107 -34 107 -3 0 -32 -60 -65 -133z"/>
      </g>
    </svg>
  </div>

  <!-- ===== “Anniversaire” ===== -->
  <div class="svg-wrapper" id="wrapperAnniv">
    <svg id="annivSVG" viewBox="0 0 3223 1361" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
      <g transform="translate(0,1361) scale(0.1,-0.1)">
        <path d="M3777 10046 c-71 -30 -119 -66 -159 -120 -45 -62 -59 -103 -65 -186
-6 -92 18 -166 76 -231 l38 -43 -112 -280 c-62 -155 -116 -291 -119 -303 l-7
-23 163 0 163 0 187 303 c255 414 288 485 288 619 0 122 -77 235 -187 272 -72
25 -195 21 -266 -8z"/>
<path d="M11610 9850 c-259 -21 -478 -100 -658 -237 -146 -112 -311 -312 -397
-482 -80 -161 -157 -420 -191 -646 -25 -166 -26 -493 -1 -620 78 -398 288
-650 632 -758 117 -37 221 -50 390 -49 403 1 688 118 942 386 237 250 381 586
438 1019 19 151 20 431 0 557 -53 347 -217 590 -492 729 -161 81 -422 121
-663 101z m245 -529 c96 -43 160 -128 190 -253 51 -212 10 -716 -79 -983 -84
-250 -198 -409 -341 -476 -158 -74 -344 -56 -444 43 -70 70 -103 152 -121 305
-20 160 2 453 50 688 65 315 214 574 381 661 96 49 272 57 364 15z"/>
<path d="M21495 9849 c-251 -19 -472 -98 -646 -229 -93 -69 -244 -230 -311
-331 -183 -273 -292 -655 -305 -1069 -9 -283 27 -482 121 -669 150 -298 410
-460 788 -490 205 -17 434 10 608 71 174 62 293 139 440 287 239 240 375 530
451 958 27 151 37 460 20 597 -58 455 -304 751 -704 846 -74 18 -289 42 -342
38 -11 0 -65 -4 -120 -9z m250 -528 c131 -58 195 -186 210 -422 13 -189 -25
-539 -80 -744 -50 -189 -161 -396 -256 -479 -99 -86 -247 -128 -375 -107 -228
39 -317 222 -301 621 11 269 61 538 133 718 97 240 224 382 384 427 79 22 220
15 285 -14z"/>
<path d="M1176 9778 c-5 -17 -367 -2619 -366 -2636 0 -11 99 -13 558 -9 623 5
663 8 889 81 201 66 333 145 468 280 269 271 419 672 441 1181 14 329 -53 603
-188 761 -163 192 -467 315 -853 343 -209 16 -945 15 -949 -1z m972 -513 c144
-34 230 -107 272 -231 67 -195 37 -619 -66 -915 -75 -218 -168 -347 -301 -417
-105 -55 -144 -64 -321 -69 l-163 -5 5 33 c4 19 54 376 111 794 58 418 108
775 111 793 l6 32 142 0 c89 0 164 -6 204 -15z"/>
<path d="M4576 9758 c-3 -18 -84 -600 -181 -1293 -96 -693 -177 -1277 -181
-1297 l-6 -38 346 0 346 0 4 23 c6 27 366 2611 366 2626 0 8 -109 11 -344 11
l-344 0 -6 -32z"/>
<path d="M5690 9784 c0 -9 -359 -2584 -365 -2621 l-6 -33 306 0 c168 0 305 2
305 4 0 3 31 227 70 498 38 271 74 536 79 588 22 204 33 503 28 725 -3 127 -3
224 0 217 3 -7 94 -466 202 -1020 l197 -1007 440 -3 439 -2 185 1327 185 1328
-299 3 c-164 1 -301 0 -304 -3 -7 -6 -137 -904 -157 -1080 -32 -286 -41 -746
-19 -920 3 -25 1 -36 -4 -30 -5 6 -101 466 -212 1023 l-204 1012 -433 0 c-238
0 -433 -3 -433 -6z"/>
<path d="M8170 9784 c0 -8 -359 -2584 -365 -2621 l-6 -33 306 0 c168 0 305 4
305 8 0 5 29 210 64 458 36 247 72 510 80 584 25 222 39 531 33 770 -3 124 -3
218 0 210 2 -8 93 -467 202 -1020 l197 -1005 439 -3 440 -2 185 1327 185 1328
-299 3 c-164 1 -301 0 -304 -3 -10 -9 -150 -999 -168 -1183 -18 -181 -25 -757
-10 -832 5 -23 4 -30 -2 -20 -6 8 -101 471 -212 1028 l-203 1012 -434 0 c-238
0 -433 -3 -433 -6z"/>
<path d="M12964 9748 c23 -164 346 -2591 346 -2603 0 -13 56 -15 443 -15 l443
0 519 1298 c285 713 525 1312 532 1330 l13 32 -357 0 -358 0 -355 -1065 c-225
-676 -357 -1059 -362 -1048 -3 10 -36 468 -72 1018 -37 550 -69 1021 -72 1048
l-6 47 -360 0 -360 0 6 -42z"/>
<path d="M15816 9781 c-9 -14 -1128 -2615 -1133 -2633 -5 -17 17 -18 354 -18
l360 0 93 270 93 270 348 0 348 0 5 -52 c8 -68 36 -437 36 -466 l0 -22 365 0
c201 0 365 3 365 8 0 4 -88 602 -197 1330 l-197 1322 -418 0 c-229 0 -419 -4
-422 -9z m389 -1051 c23 -300 40 -548 38 -552 -6 -12 -483 -10 -483 2 0 9 369
1081 387 1125 7 19 8 18 11 -5 2 -14 23 -270 47 -570z"/>
<path d="M17190 9776 c0 -16 -56 -439 -65 -493 l-6 -33 328 -2 328 -3 -147
-1040 c-81 -572 -147 -1048 -147 -1057 -1 -17 22 -18 344 -18 l344 0 6 33 c3
17 68 482 145 1032 77 550 143 1012 146 1028 l6 27 307 0 307 0 72 263 c40
144 72 265 72 270 0 4 -459 7 -1020 7 -883 0 -1020 -2 -1020 -14z"/>
<path d="M19425 9768 c-6 -28 -365 -2610 -365 -2626 0 -9 88 -12 344 -12 l344
0 6 38 c4 20 85 602 181 1292 96 690 177 1272 181 1293 l6 37 -346 0 -346 0
-5 -22z"/>
<path d="M23140 9784 c0 -9 -359 -2586 -365 -2621 l-6 -33 306 0 c168 0 305 4
305 8 0 5 31 226 69 493 97 676 105 763 105 1187 1 193 3 347 4 342 2 -6 92
-464 201 -1018 l197 -1007 440 -3 439 -2 185 1327 185 1328 -299 3 c-164 1
-301 0 -304 -3 -7 -7 -136 -899 -156 -1078 -32 -283 -42 -749 -20 -922 3 -24
1 -36 -4 -30 -5 6 -101 466 -212 1023 l-204 1012 -433 0 c-238 0 -433 -3 -433
-6z"/>
<path d="M8669 6047 c-66 -19 -131 -60 -178 -113 -109 -124 -110 -328 -3 -443
18 -18 32 -36 32 -40 0 -4 -54 -141 -120 -306 -66 -165 -120 -301 -120 -302 0
-2 74 -3 164 -3 l163 0 181 293 c271 439 295 491 295 637 0 123 -54 210 -161
261 -58 27 -186 35 -253 16z"/>
<path d="M14832 5829 c-415 -56 -760 -282 -982 -644 -242 -393 -344 -1031
-235 -1462 76 -300 254 -504 526 -604 152 -56 260 -72 479 -73 212 0 293 10
496 64 204 54 495 186 514 233 5 12 47 306 95 652 47 347 87 638 89 648 4 16
-26 17 -515 17 l-518 0 -3 -245 -3 -245 153 0 152 0 -5 -22 c-2 -13 -18 -122
-35 -243 -16 -121 -32 -234 -35 -252 -5 -28 -13 -34 -59 -52 -151 -56 -334
-65 -448 -22 -159 61 -229 247 -213 566 25 500 132 822 341 1029 215 213 586
223 852 24 29 -22 58 -38 64 -36 6 2 93 78 194 168 l183 165 -27 28 c-120 127
-333 243 -530 288 -102 24 -409 34 -530 18z"/>
<path d="M19456 5824 c-197 -26 -388 -97 -543 -200 -119 -79 -302 -262 -382
-383 -138 -209 -229 -449 -283 -751 -31 -170 -33 -568 -5 -698 70 -319 218
-522 464 -639 305 -145 735 -150 1156 -13 123 40 405 172 413 193 3 10 184
1305 184 1321 0 3 -231 6 -513 6 l-514 0 -6 -127 c-4 -71 -7 -181 -7 -245 l0
-118 150 0 c83 0 150 -3 150 -7 0 -5 -16 -128 -37 -275 l-37 -268 -76 -25
c-279 -91 -504 -41 -585 132 -46 96 -58 194 -52 408 15 489 123 823 336 1036
67 67 148 116 240 146 72 23 252 28 341 9 84 -17 210 -77 285 -135 l50 -38
134 121 c74 67 160 145 190 173 l56 53 -55 50 c-159 144 -360 239 -583 275
-112 18 -335 18 -471 -1z"/>
<path d="M1175 5758 c-5 -17 -365 -2608 -365 -2630 0 -17 46 -18 823 -18 l823
0 32 238 c18 130 32 243 32 250 0 9 -102 12 -476 12 l-476 0 5 28 c3 15 22
152 43 305 l38 277 393 0 c320 0 393 2 393 13 0 8 14 114 30 237 17 123 30
227 30 232 0 4 -175 8 -390 8 -214 0 -390 2 -390 3 0 2 18 129 40 282 22 153
40 280 40 282 0 1 202 3 448 3 l448 0 71 245 71 245 -830 0 c-654 0 -829 -3
-833 -12z"/>
<path d="M2965 5758 c-6 -18 -65 -470 -65 -496 l0 -22 325 0 326 0 -6 -32 c-3
-18 -68 -483 -145 -1033 -77 -550 -143 -1015 -146 -1032 l-6 -33 346 0 346 0
5 23 c5 23 295 2084 295 2098 0 5 139 9 310 9 l309 0 15 53 c9 28 42 148 74
265 l59 212 -1019 0 c-806 0 -1019 -3 -1023 -12z"/>
<path d="M6030 5763 c0 -11 -358 -2581 -365 -2620 l-6 -33 438 0 c241 0 501 5
578 10 580 44 942 269 1160 724 135 283 192 579 182 955 -4 178 -8 219 -30
302 -47 181 -132 324 -245 413 -65 52 -220 134 -307 164 -237 80 -356 92 -931
92 -260 0 -474 -3 -474 -7z m1010 -522 c129 -41 197 -107 241 -232 19 -53 23
-92 27 -230 7 -275 -36 -530 -127 -754 -72 -176 -161 -284 -286 -345 -90 -44
-165 -60 -322 -67 -119 -5 -143 -4 -143 8 -1 20 221 1621 226 1638 7 23 300 9
384 -18z"/>
<path d="M9250 4440 l-186 -1330 826 0 826 0 32 243 c18 133 32 245 32 250 0
4 -214 7 -476 7 l-476 0 5 28 c2 15 22 152 43 305 l38 277 391 0 391 0 28 213
c16 116 31 227 33 245 l6 32 -392 0 c-215 0 -391 2 -391 3 0 2 18 129 40 282
22 153 40 280 40 282 0 1 201 3 448 3 l447 0 71 245 71 245 -831 0 -831 0
-185 -1330z"/>
<path d="M11220 4440 l-186 -1330 303 0 303 0 5 23 c10 46 135 949 152 1097
13 119 17 246 17 543 1 213 4 379 8 370 7 -16 398 -2010 398 -2027 0 -3 198
-6 440 -6 242 0 440 3 440 6 0 10 360 2588 366 2622 l6 32 -306 0 c-168 0
-306 -3 -306 -6 0 -3 -31 -223 -70 -488 -104 -724 -105 -731 -105 -1169 0
-207 -2 -372 -4 -365 -2 7 -95 465 -206 1018 l-201 1005 -435 3 -434 2 -185
-1330z"/>
<path d="M16801 5728 c-10 -24 -266 -620 -570 -1325 -303 -704 -551 -1284
-551 -1287 0 -3 161 -6 359 -6 l359 0 58 168 c31 92 74 214 94 272 l38 105
349 3 349 2 18 -247 c9 -137 19 -260 22 -275 l6 -28 364 0 364 0 -5 23 c-2 12
-90 598 -195 1302 -105 704 -193 1292 -196 1308 l-6 27 -419 0 -420 0 -18 -42z
m404 -958 c20 -267 38 -513 42 -547 l6 -63 -248 0 c-193 0 -246 3 -242 13 2 6
92 265 198 574 156 453 195 558 201 535 4 -15 23 -245 43 -512z"/>
<path d="M20970 5764 c0 -9 -359 -2582 -365 -2621 l-6 -33 825 0 824 0 6 28
c3 15 17 113 31 217 14 105 28 205 31 223 l6 32 -476 0 c-447 0 -476 1 -476
18 0 9 18 145 40 302 22 157 40 286 40 288 0 1 175 2 390 2 l390 0 4 23 c3 12
17 112 31 222 14 110 28 210 30 223 l5 22 -390 0 -390 0 1 28 c0 15 17 142 37
282 l38 255 446 3 446 2 16 48 c21 68 126 428 126 436 0 3 -373 6 -830 6 -456
0 -830 -3 -830 -6z"/>
<path d="M23015 5758 c-7 -23 -555 -2625 -555 -2636 0 -9 90 -12 338 -12 l339
0 106 643 c58 353 113 698 121 767 20 159 46 499 47 610 1 201 20 -1 74 -780
31 -454 59 -855 62 -892 l6 -68 333 0 333 0 130 398 c71 218 205 629 297 912
92 283 170 519 174 523 4 5 -1 -38 -11 -95 -64 -354 -112 -722 -184 -1423 -30
-297 -57 -552 -60 -568 l-5 -27 343 2 342 3 81 1235 c45 679 85 1277 89 1328
l6 92 -445 0 -445 0 -34 -107 c-18 -60 -145 -467 -283 -905 -153 -490 -252
-791 -256 -780 -3 9 -25 386 -47 837 -23 451 -44 850 -48 888 l-6 67 -419 0
c-326 0 -420 -3 -423 -12z"/>
<path d="M25732 4452 c-101 -724 -183 -1323 -182 -1329 0 -10 172 -13 823 -13
l823 0 32 243 c18 133 32 245 32 250 0 4 -214 7 -476 7 l-476 0 5 28 c3 15 22
152 43 305 l38 277 391 0 391 0 28 213 c16 116 31 227 33 245 l6 32 -392 0
c-215 0 -391 2 -391 3 0 2 18 129 40 282 22 153 40 280 40 282 0 1 201 3 448
3 l447 0 71 245 71 245 -831 0 -831 0 -183 -1318z"/>
<path d="M27702 4453 c-101 -725 -183 -1324 -183 -1330 1 -10 68 -13 301 -13
l300 0 5 23 c12 55 145 1026 157 1147 8 84 13 276 13 508 0 205 3 364 7 355 7
-16 398 -2009 398 -2026 0 -4 198 -7 439 -7 l439 0 6 38 c3 20 85 604 181
1297 97 693 178 1275 181 1293 l6 32 -306 0 c-168 0 -306 -4 -306 -8 0 -5 -31
-224 -70 -488 -103 -713 -104 -728 -105 -1167 0 -207 -1 -373 -3 -368 -2 5
-94 463 -206 1017 l-203 1009 -434 3 -434 2 -183 -1317z"/>
<path d="M30149 5505 l-35 -265 329 0 329 0 -6 -27 c-3 -16 -69 -480 -146
-1033 -78 -553 -143 -1020 -146 -1037 l-6 -33 346 0 346 0 5 23 c4 21 295
2089 295 2101 0 3 139 6 309 6 286 0 310 1 315 18 27 91 136 492 136 501 0 8
-260 11 -1018 11 l-1018 0 -35 -265z"/>
      </g>
    </svg>
  </div>
</div>

<!-- juste après le bloc #wrapperAnniv -->


<!-- Librairies -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mojs/core"></script>

<!-- Animation -->
<script>
document.addEventListener('DOMContentLoaded', ()=>{

  /* ---------------- CONFIG ---------------- */
  const cfg = {
    draw30      : 3200,
    fill30      : 800,
    zoom30      : 600,
    slide30     : 600,
    writeLetter : 70,
    fillLetter  : 40,
    overlap     : 0,
    bursts      : 60,
    colors      : ['#0C306F','#4F8EDC','#32E47E','#F3C623']
  };

  /* ---------- utilitaire : centre du groupe ---------- */
  const groupCenterX = () => {
    const r30 = document.getElementById('wrapper30').getBoundingClientRect();
    const rA  = document.getElementById('wrapperAnniv').getBoundingClientRect();
    return (r30.left + rA.right) / 2;
  };

  /* ---------- préparation “30” ---------- */
  const svg30   = document.getElementById('number30');
  const paths30 = [...svg30.querySelectorAll('path')];
  const meta30  = paths30.map(p=>{
    const L = p.getTotalLength();
    p.setAttribute('stroke-dasharray',L);
    p.setAttribute('stroke-dashoffset',L);
    return {el:p,L,last:-1};
  });

  /* ---------- préparation “Anniversaire” ---------- */
  const svgA   = document.getElementById('annivSVG');
  const pathsA = [...svgA.querySelectorAll('path')]
                  .sort((a,b)=>a.getBBox().x-b.getBBox().x);
  pathsA.forEach(p=>{
    const L = p.getTotalLength();
    p.setAttribute('stroke-dasharray',L);
    p.setAttribute('stroke-dashoffset',L);
  });

  /* ---------------- TIMELINE ---------------- */
  const tl = anime.timeline({ autoplay:true, easing:'easeInOutQuad' });

  /* 1 ▸ tracé + mini-bursts “30” */
  tl.add({
    targets  : {t:0},
    t        : 1,
    duration : cfg.draw30,
    easing   : 'linear',
    update(anim){
      const t = anim.animatables[0].target.t;
      meta30.forEach(m=>{
        m.el.setAttribute('stroke-dashoffset', m.L*(1-t));
        const step = Math.floor(t*cfg.bursts);
        if(step > m.last){
          m.last = step;
          const pt = m.el.getPointAtLength(m.L*(step/cfg.bursts));
          const sp = svg30.createSVGPoint(); sp.x = pt.x; sp.y = pt.y;
          const {x,y} = sp.matrixTransform(m.el.getScreenCTM());
          new mojs.Burst({
            left:0, top:0, x, y,
            radius:{0:20}, count:6,
            children:{
              shape:'circle',
              radius:{3:0},
              fill:cfg.colors[Math.floor(Math.random()*cfg.colors.length)],
              opacity:{1:0},
              duration:400,
              easing:'quad.out'
            }
          }).replay();
        }
      });
    }
  })

  /* 2 ▸ remplissage + zoom + slide “30” */
  .add({ targets:'#number30 path', fillOpacity:[0,1], duration:cfg.fill30 })
  .add({ targets:'#wrapper30', scale:[1,0.6], duration:cfg.zoom30 }, '-=200')
  .add({ targets:'#wrapper30', translateX:['0vw','-10vw'], duration:cfg.slide30 }, '-=200');

  /* 3 ▸ écriture & remplissage du mot */
  pathsA.forEach((p,i)=>{
    tl.add({
      targets  : p,
      strokeDashoffset:[p.getTotalLength(),0],
      duration : cfg.writeLetter,
      easing   : 'easeInOutSine'
    }, i ? `-=${cfg.writeLetter-cfg.overlap}` : '+=0')
    .add({
      targets  : p,
      fillOpacity:[0,1],
      duration : cfg.fillLetter,
      easing   : 'easeInOutQuad'
    }, '+=0');
  });

  /* 4 ▸ descente du PNG final, centré dynamiquement */
  tl.add({
    targets   : '#celebrationImg',
    opacity   : [0,1],
    translateY: ['-20vmin','0vmin'],
    scale     : [0.8,1],
    duration  : 900,
    easing    : 'easeOutBack',
    begin(){
      const img = document.getElementById('celebrationImg');
      img.style.left = `${groupCenterX()}px`;   // centre horizontalement
    }
  });

});
</script>


</body>
</html>

<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>“30” – Tracé, feux d’artifice, dézoom puis slide</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box }
    html, body {
      height:100vh;
      overflow: visible;              /* ← on affiche tout le débordement */
      display:flex; align-items:center; justify-content:center;
      background:#fff;
    }
    /* Origine au centre pour le scale */
    #number30 {
      position: relative;             /* ← positionné pour z-index */
      z-index: 10;                    /* ← toujours au-dessus */
      transform-origin: 50% 50%;
      will-change: transform, opacity;
      transform: translateZ(0);
    }
    svg {
      width:80vmin;
      height:auto;
      vector-effect: non-scaling-stroke;
    }
    #number30 path {
      fill: #0C306F;
      fill-opacity: 0;
      stroke: #0C306F;
      stroke-width: 8;
      stroke-linecap: round;
      stroke-linejoin: round;
      will-change: stroke-dashoffset, fill-opacity;
    }
  </style>
</head>
<body>

  <!-- SVG “30” -->
  <svg id="number30" viewBox="0 0 2178 1361" xmlns="http://www.w3.org/2000/svg">
    <path d="M 509.311,1360.004 C 397.372,1354.159 296.244,1322.683 211.696,1267.373 C 165.217,1236.967 128.915,1203.542 98.879,1163.500 C 41.159,1086.550 3.462,996.077 1.378,929.500 C 1.378,929.500 0.909,914.500 0.909,914.500 C 0.909,914.500 6.339,929 6.339,929 C 25.252,979.503 49.827,1023.625 80.418,1062 C 92.771,1077.496 121.989,1106.958 136,1118.048 C 172.842,1147.208 218.908,1168.720 277,1183.890 C 406.129,1217.612 535.379,1203.018 636.253,1143.326 C 697.715,1106.956 751.057,1053.933 793.355,987.163 C 808.753,962.856 828.706,925.530 840.081,899.751 C 841.962,895.489 843.738,892.002 844.029,892.001 C 844.320,892 845.838,896.838 847.402,902.750 C 851.364,917.730 863.773,954.988 869.878,970.238 C 893.555,1029.379 924.420,1083.529 962.307,1132.399 C 962.307,1132.399 969.113,1141.178 969.113,1141.178 C 969.113,1141.178 967.385,1143.839 967.385,1143.839 C 956.917,1159.954 922.791,1197.807 900.138,1218.430 C 809.107,1301.303 707.081,1347.461 590.500,1358.515 C 570.657,1360.397 530.823,1361.127 509.311,1360.004"/>
    <path d="M 1453,1334.371 C 1333.688,1327.344 1223.167,1288.124 1127.960,1219.026 C 1045.376,1159.090 977.052,1076.189 934.648,984.473 C 925.537,964.766 906.050,916.828 898.683,896 C 895.668,887.475 889.726,869.475 885.480,856 C 875.019,822.805 870.256,810.160 861.562,792.500 C 847.606,764.150 827.989,735.938 795.502,697.500 C 666.098,544.389 539.325,481.121 379.500,489.890 C 317.740,493.279 260.999,504.745 222.589,521.598 C 222.589,521.598 212.678,525.947 212.678,525.947 C 212.678,525.947 222.589,515.765 222.589,515.765 C 228.040,510.165 293.700,443.271 368.500,367.111 C 443.300,290.951 504.500,228.157 504.500,227.569 C 504.500,226.818 461.536,226.342 360,225.967 C 201.898,225.384 209.474,225.661 179.517,219.351 C 153.662,213.905 126.481,202.601 108.586,189.851 C 67.860,160.835 47.121,113.325 49.285,54 C 49.870,37.973 51.974,21.059 54.927,8.648 C 54.927,8.648 56.628,1.500 56.628,1.500 C 56.628,1.500 60.450,9 60.450,9 C 77.157,41.788 105.455,61.191 143.500,65.947 C 148.858,66.617 237.305,66.560 411.281,65.775 C 609.527,64.880 673.253,64.880 680.317,65.772 C 710.114,69.535 738.761,85.129 756.416,107.195 C 780.070,136.758 779.758,169.455 755.497,203.453 C 743.525,220.230 666.105,305.448 622.657,349.673 C 611.193,361.342 602.064,371.295 602.371,371.792 C 602.678,372.289 607.969,373.001 614.129,373.375 C 683.168,377.568 766.487,407.916 837.262,454.648 C 896.883,494.015 950.432,544.780 989.533,599 C 1029.047,653.793 1061.237,720.577 1079.593,785.848 C 1098.166,851.890 1111.643,891.657 1127.936,928.500 C 1166.345,1015.351 1222.813,1078.308 1294.580,1114.291 C 1338.605,1136.365 1389.198,1150.897 1442,1156.637 C 1463.172,1158.939 1506.865,1158.942 1527.757,1156.644 C 1582.105,1150.665 1627.234,1137.707 1674.500,1114.508 C 1716.723,1093.784 1751.242,1069.393 1784.881,1036.512 C 1821.649,1000.572 1846.662,966.590 1869.538,921.500 C 1908.239,845.217 1923.042,758.493 1912.016,672.623 C 1890.550,505.443 1770.396,364.126 1608,315.060 C 1525.392,290.101 1432.863,291.264 1351,318.292 C 1265.339,346.573 1192.723,399.158 1138,472.534 C 1109.868,510.255 1087.282,555.153 1073.016,601.713 C 1073.016,601.713 1068.354,616.926 1068.354,616.926 C 1068.354,616.926 1060.427,604.415 1060.427,604.415 C 1031.689,559.061 988.546,509.195 947.213,473.556 C 942.146,469.187 938,465.243 938,464.791 C 938,463.270 949.852,440.310 957.585,426.851 C 986.910,375.813 1018.711,334.935 1062.103,292.500 C 1106.477,249.105 1154.676,214.582 1210,186.567 C 1280.899,150.665 1351.617,130.403 1432.500,122.814 C 1453.857,120.810 1522.034,121.132 1542.500,123.334 C 1620.768,131.754 1685.497,150.301 1752.500,183.506 C 1813.959,213.964 1863.487,249.482 1912.096,297.962 C 1940.638,326.428 1958.243,347.159 1981.187,379.322 C 2035.271,455.137 2073.045,550.260 2085.895,643 C 2090.389,675.430 2091.405,691.129 2091.396,728 C 2091.386,771.939 2089.182,797.483 2081.905,838 C 2067.908,915.938 2035.834,995.425 1991.116,1063 C 1953.060,1120.508 1904.875,1171.632 1849.500,1213.253 C 1758.053,1281.986 1651.591,1322.601 1535.500,1333.042 C 1523.352,1334.135 1464.954,1335.075 1453,1334.371"/>
  </svg>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mojs/core"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const svg   = document.getElementById('number30');
      const paths = Array.from(svg.querySelectorAll('path'));
      const D     = 3200, N = 80;
      const colors = ['#0C306F','#4F8EDC','#32E47E','#F3C623'];

      // Préparation
      const meta = paths.map(p => {
        const L = p.getTotalLength();
        p.setAttribute('stroke-dasharray', L);
        p.setAttribute('stroke-dashoffset', L);
        p.setAttribute('fill-opacity', 0);
        return { el: p, L, last: -1 };
      });

      // 1) Tracé + feux
      anime({
        targets: { t: 0 }, t: 1,
        duration: D, easing: 'linear',
        update(anim) {
          const t = anim.animatables[0].target.t;
          meta.forEach(m => {
            m.el.setAttribute('stroke-dashoffset', m.L * (1 - t));
            const step = Math.floor(t * N);
            if (step > m.last) {
              m.last = step;
              const ptSVG = m.el.getPointAtLength(m.L * (step / N));
              const pt = svg.createSVGPoint();
              pt.x = ptSVG.x; pt.y = ptSVG.y;
              const { x, y } = pt.matrixTransform(m.el.getScreenCTM());
              new mojs.Burst({
                left:0, top:0, x, y,
                radius:{0:20}, count:6,
                children: {
                  shape:'circle', radius:{3:0},
                  fill: colors[Math.floor(Math.random()*colors.length)],
                  opacity:{1:0}, duration:500, easing:'quad.out'
                }
              }).replay();
            }
          });
        },
        complete: () => {
          // 2a) Remplissage
          anime({
            targets: paths,
            fillOpacity: [0,1],
            duration: 800, easing: 'easeInOutQuad',
            complete: () => {
              // 2b) Dézoom centré
              anime({
                targets: '#number30',
                scale: [1, 0.6],
                duration: 600, easing: 'easeInOutQuad',
                complete: () => {
                  // 2c) Glissement vers la gauche
                  anime({
                    targets: '#number30',
                    translateX: ['0vw','-20vw'],
                    duration: 600, easing: 'easeInOutQuad'
                  });
                }
              });
            }
          });
        }
      });
    });
  </script>
</body>
</html>
